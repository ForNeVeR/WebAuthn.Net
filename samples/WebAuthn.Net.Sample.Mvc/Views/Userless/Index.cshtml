@{
    ViewData["Title"] = "Webauthn.Net Userless";
    ViewData["ShowLogoutButton"] = false;
}

<div class="row">
    <div class="col-md-4"></div>
    <div class="col-md-4">
        <div class="card">
            <div class="card-body">
                <h2 class="card-title">Userless Authentication</h2>
                <form id="webauthn-authenticate" class="p-1">
                    <button type="submit" id="webauthn-authenticate-submit" class="btn btn-primary">Submit</button>
                </form>
            </div>
        </div>
    </div>
    <div class="col-md-4"></div>
</div>


<script async type="text/javascript">
// Utils
const isWebauthnAvailable = () => {
    const missingWebauthnApis = window.PublicKeyCredential === undefined
    || typeof window.PublicKeyCredential !== "function"
    || typeof window.PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable !== "function";

    return window.isSecureContext && !missingWebauthnApis;
};

// INIT
document.addEventListener("DOMContentLoaded", () => {
    if (!isWebauthnAvailable()) {
        alert("Browser doesn't support Webauthn API");
        return;
    }
    // TODO
});
</script>
